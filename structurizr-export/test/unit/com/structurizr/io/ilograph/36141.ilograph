resources:

  - id: "1"
    name: "Personal Banking Customer"
    subtitle: "[Person]"
    description: "A customer of the bank, with personal bank accounts."
    backgroundColor: "#08427b"
    color: "#ffffff"

  - id: "12"
    name: "Customer Service Staff"
    subtitle: "[Person]"
    description: "Customer service staff within the bank."
    backgroundColor: "#999999"
    color: "#ffffff"

  - id: "15"
    name: "Back Office Staff"
    subtitle: "[Person]"
    description: "Administration and support staff within the bank."
    backgroundColor: "#999999"
    color: "#ffffff"

  - id: "2"
    name: "Internet Banking System"
    subtitle: "[Software System]"
    description: "Allows customers to view information about their bank accounts, and make payments."
    backgroundColor: "#1168bd"
    color: "#ffffff"

    children:
      - id: "17"
        name: "Single-Page Application"
        subtitle: "[Container: JavaScript and Angular]"
        description: "Provides all of the Internet banking functionality to customers via their web browser."
        backgroundColor: "#438dd5"
        color: "#ffffff"

      - id: "18"
        name: "Mobile App"
        subtitle: "[Container: Xamarin]"
        description: "Provides a limited subset of the Internet banking functionality to customers via their mobile device."
        backgroundColor: "#438dd5"
        color: "#ffffff"

      - id: "19"
        name: "Web Application"
        subtitle: "[Container: Java and Spring MVC]"
        description: "Delivers the static content and the Internet banking single page application."
        backgroundColor: "#438dd5"
        color: "#ffffff"

      - id: "20"
        name: "API Application"
        subtitle: "[Container: Java and Spring MVC]"
        description: "Provides Internet banking functionality via a JSON/HTTPS API."
        backgroundColor: "#438dd5"
        color: "#ffffff"

        children:
          - id: "29"
            name: "Sign In Controller"
            subtitle: "[Component: Spring MVC Rest Controller]"
            description: "Allows users to sign in to the Internet Banking System."
            backgroundColor: "#85bbf0"
            color: "#000000"

          - id: "30"
            name: "Accounts Summary Controller"
            subtitle: "[Component: Spring MVC Rest Controller]"
            description: "Provides customers with a summary of their bank accounts."
            backgroundColor: "#85bbf0"
            color: "#000000"

          - id: "31"
            name: "Reset Password Controller"
            subtitle: "[Component: Spring MVC Rest Controller]"
            description: "Allows users to reset their passwords with a single use URL."
            backgroundColor: "#85bbf0"
            color: "#000000"

          - id: "32"
            name: "Security Component"
            subtitle: "[Component: Spring Bean]"
            description: "Provides functionality related to signing in, changing passwords, etc."
            backgroundColor: "#85bbf0"
            color: "#000000"

          - id: "33"
            name: "Mainframe Banking System Facade"
            subtitle: "[Component: Spring Bean]"
            description: "A facade onto the mainframe banking system."
            backgroundColor: "#85bbf0"
            color: "#000000"

          - id: "34"
            name: "E-mail Component"
            subtitle: "[Component: Spring Bean]"
            description: "Sends e-mails to users."
            backgroundColor: "#85bbf0"
            color: "#000000"

      - id: "21"
        name: "Database"
        subtitle: "[Container: Oracle Database Schema]"
        description: "Stores user registration information, hashed authentication credentials, access logs, etc."
        backgroundColor: "#438dd5"
        color: "#ffffff"

  - id: "4"
    name: "Mainframe Banking System"
    subtitle: "[Software System]"
    description: "Stores all of the core banking information about customers, accounts, transactions, etc."
    backgroundColor: "#999999"
    color: "#ffffff"

  - id: "6"
    name: "E-mail System"
    subtitle: "[Software System]"
    description: "The internal Microsoft Exchange e-mail system."
    backgroundColor: "#999999"
    color: "#ffffff"

  - id: "9"
    name: "ATM"
    subtitle: "[Software System]"
    description: "Allows customers to withdraw cash."
    backgroundColor: "#999999"
    color: "#ffffff"

  - id: "50"
    name: "Developer Laptop"
    subtitle: "[Deployment Node: Microsoft Windows 10 or Apple macOS]"
    description: "A developer laptop."
    backgroundColor: "#ffffff"
    color: "#000000"

    children:
      - id: "51"
        name: "Docker Container - Web Server"
        subtitle: "[Deployment Node: Docker]"
        description: "A Docker container."
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "52"
            name: "Apache Tomcat"
            subtitle: "[Deployment Node: Apache Tomcat 8.x]"
            description: "An open source Java EE web server."
            backgroundColor: "#ffffff"
            color: "#000000"

            children:
              - id: "53"
                name: "Web Application"
                subtitle: "[Container: Java and Spring MVC]"
                description: "Delivers the static content and the Internet banking single page application."
                backgroundColor: "#438dd5"
                color: "#ffffff"

              - id: "54"
                name: "API Application"
                subtitle: "[Container: Java and Spring MVC]"
                description: "Provides Internet banking functionality via a JSON/HTTPS API."
                backgroundColor: "#438dd5"
                color: "#ffffff"

      - id: "59"
        name: "Docker Container - Database Server"
        subtitle: "[Deployment Node: Docker]"
        description: "A Docker container."
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "60"
            name: "Database Server"
            subtitle: "[Deployment Node: Oracle 12c]"
            description: "A development database."
            backgroundColor: "#ffffff"
            color: "#000000"

            children:
              - id: "61"
                name: "Database"
                subtitle: "[Container: Oracle Database Schema]"
                description: "Stores user registration information, hashed authentication credentials, access logs, etc."
                backgroundColor: "#438dd5"
                color: "#ffffff"

      - id: "63"
        name: "Web Browser"
        subtitle: "[Deployment Node: Chrome, Firefox, Safari, or Edge]"
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "64"
            name: "Single-Page Application"
            subtitle: "[Container: JavaScript and Angular]"
            description: "Provides all of the Internet banking functionality to customers via their web browser."
            backgroundColor: "#438dd5"
            color: "#ffffff"

  - id: "55"
    name: "Big Bank plc"
    subtitle: "[Deployment Node: Big Bank plc data center]"
    backgroundColor: "#ffffff"
    color: "#000000"

    children:
      - id: "56"
        name: "bigbank-dev001"
        subtitle: "[Deployment Node]"
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "57"
            name: "Mainframe Banking System"
            subtitle: "[Software System]"
            description: "Stores all of the core banking information about customers, accounts, transactions, etc."
            backgroundColor: "#999999"
            color: "#ffffff"

  - id: "67"
    name: "Customer's mobile device"
    subtitle: "[Deployment Node: Apple iOS or Android]"
    backgroundColor: "#ffffff"
    color: "#000000"

    children:
      - id: "68"
        name: "Mobile App"
        subtitle: "[Container: Xamarin]"
        description: "Provides a limited subset of the Internet banking functionality to customers via their mobile device."
        backgroundColor: "#438dd5"
        color: "#ffffff"

  - id: "69"
    name: "Customer's computer"
    subtitle: "[Deployment Node: Microsoft Windows or Apple macOS]"
    backgroundColor: "#ffffff"
    color: "#000000"

    children:
      - id: "70"
        name: "Web Browser"
        subtitle: "[Deployment Node: Chrome, Firefox, Safari, or Edge]"
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "71"
            name: "Single-Page Application"
            subtitle: "[Container: JavaScript and Angular]"
            description: "Provides all of the Internet banking functionality to customers via their web browser."
            backgroundColor: "#438dd5"
            color: "#ffffff"

  - id: "72"
    name: "Big Bank plc"
    subtitle: "[Deployment Node: Big Bank plc data center]"
    backgroundColor: "#ffffff"
    color: "#000000"

    children:
      - id: "73"
        name: "bigbank-prod001"
        subtitle: "[Deployment Node]"
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "74"
            name: "Mainframe Banking System"
            subtitle: "[Software System]"
            description: "Stores all of the core banking information about customers, accounts, transactions, etc."
            backgroundColor: "#999999"
            color: "#ffffff"

      - id: "75"
        name: "bigbank-web***"
        subtitle: "[Deployment Node: Ubuntu 16.04 LTS]"
        description: "A web server residing in the web server farm, accessed via F5 BIG-IP LTMs."
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "76"
            name: "Apache Tomcat"
            subtitle: "[Deployment Node: Apache Tomcat 8.x]"
            description: "An open source Java EE web server."
            backgroundColor: "#ffffff"
            color: "#000000"

            children:
              - id: "77"
                name: "Web Application"
                subtitle: "[Container: Java and Spring MVC]"
                description: "Delivers the static content and the Internet banking single page application."
                backgroundColor: "#438dd5"
                color: "#ffffff"

      - id: "79"
        name: "bigbank-api***"
        subtitle: "[Deployment Node: Ubuntu 16.04 LTS]"
        description: "A web server residing in the web server farm, accessed via F5 BIG-IP LTMs."
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "80"
            name: "Apache Tomcat"
            subtitle: "[Deployment Node: Apache Tomcat 8.x]"
            description: "An open source Java EE web server."
            backgroundColor: "#ffffff"
            color: "#000000"

            children:
              - id: "81"
                name: "API Application"
                subtitle: "[Container: Java and Spring MVC]"
                description: "Provides Internet banking functionality via a JSON/HTTPS API."
                backgroundColor: "#438dd5"
                color: "#ffffff"

      - id: "85"
        name: "bigbank-db01"
        subtitle: "[Deployment Node: Ubuntu 16.04 LTS]"
        description: "The primary database server."
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "86"
            name: "Oracle - Primary"
            subtitle: "[Deployment Node: Oracle 12c]"
            description: "The primary, live database server."
            backgroundColor: "#ffffff"
            color: "#000000"

            children:
              - id: "87"
                name: "Database"
                subtitle: "[Container: Oracle Database Schema]"
                description: "Stores user registration information, hashed authentication credentials, access logs, etc."
                backgroundColor: "#438dd5"
                color: "#ffffff"

      - id: "89"
        name: "bigbank-db02"
        subtitle: "[Deployment Node: Ubuntu 16.04 LTS]"
        description: "The secondary database server."
        backgroundColor: "#ffffff"
        color: "#000000"

        children:
          - id: "90"
            name: "Oracle - Secondary"
            subtitle: "[Deployment Node: Oracle 12c]"
            description: "A secondary, standby database server, used for failover purposes only."
            backgroundColor: "#ffffff"
            color: "#000000"

            children:
              - id: "91"
                name: "Database"
                subtitle: "[Container: Oracle Database Schema]"
                description: "Stores user registration information, hashed authentication credentials, access logs, etc."
                backgroundColor: "#438dd5"
                color: "#ffffff"

perspectives:
  - name: Static Structure
    relations:
      - from: "1"
        to: "9"
        label: "Withdraws cash using"

      - from: "1"
        to: "12"
        label: "Asks questions to"
        description: "Telephone"

      - from: "1"
        to: "2"
        label: "Views account balances, and makes payments using"

      - from: "12"
        to: "4"
        label: "Uses"

      - from: "15"
        to: "4"
        label: "Uses"

      - from: "2"
        to: "4"
        label: "Gets account information from, and makes payments using"

      - from: "2"
        to: "6"
        label: "Sends e-mail using"

      - from: "6"
        to: "1"
        label: "Sends e-mails to"

      - from: "9"
        to: "4"
        label: "Uses"

      - from: "1"
        to: "19"
        label: "Visits bigbank.com/ib using"
        description: "HTTPS"

      - from: "1"
        to: "17"
        label: "Views account balances, and makes payments using"

      - from: "1"
        to: "18"
        label: "Views account balances, and makes payments using"

      - from: "17"
        to: "20"
        label: "Makes API calls to"
        description: "JSON/HTTPS"

      - from: "18"
        to: "20"
        label: "Makes API calls to"
        description: "JSON/HTTPS"

      - from: "19"
        to: "17"
        label: "Delivers to the customer's web browser"

      - from: "20"
        to: "21"
        label: "Reads from and writes to"
        description: "JDBC"

      - from: "20"
        to: "4"
        label: "Makes API calls to"
        description: "XML/HTTPS"

      - from: "20"
        to: "6"
        label: "Sends e-mail using"
        description: "SMTP"

      - from: "17"
        to: "29"
        label: "Makes API calls to"
        description: "JSON/HTTPS"

      - from: "17"
        to: "31"
        label: "Makes API calls to"
        description: "JSON/HTTPS"

      - from: "17"
        to: "30"
        label: "Makes API calls to"
        description: "JSON/HTTPS"

      - from: "18"
        to: "29"
        label: "Makes API calls to"
        description: "JSON/HTTPS"

      - from: "18"
        to: "31"
        label: "Makes API calls to"
        description: "JSON/HTTPS"

      - from: "18"
        to: "30"
        label: "Makes API calls to"
        description: "JSON/HTTPS"

      - from: "29"
        to: "32"
        label: "Uses"

      - from: "30"
        to: "33"
        label: "Uses"

      - from: "31"
        to: "32"
        label: "Uses"

      - from: "31"
        to: "34"
        label: "Uses"

      - from: "32"
        to: "21"
        label: "Reads from and writes to"
        description: "JDBC"

      - from: "33"
        to: "4"
        label: "Uses"
        description: "XML/HTTPS"

      - from: "34"
        to: "6"
        label: "Sends e-mail using"

  - name: Dynamic - API Application - Dynamic
    sequence:
      start: "17"
      steps:
      - to: "29"
        label: "1. Submits credentials to"
        description: "JSON/HTTPS"

      - to: "32"
        label: "2. Validates credentials using"

      - to: "21"
        label: "3. select * from users where username = ?"
        description: "JDBC"

      - to: "32"
        label: "4. Returns user data to"
        description: "JDBC"

      - to: "29"
        label: "5. Returns true if the hashed password matches"

      - to: "17"
        label: "6. Sends back an authentication token to"
        description: "JSON/HTTPS"

  - name: Deployment - Development
    relations:
      - from: "53"
        to: "64"
        label: "Delivers to the customer's web browser"
      - from: "54"
        to: "57"
        label: "Makes API calls to"
        description: "XML/HTTPS"
      - from: "54"
        to: "61"
        label: "Reads from and writes to"
        description: "JDBC"
      - from: "64"
        to: "54"
        label: "Makes API calls to"
        description: "JSON/HTTPS"
  - name: Deployment - Live
    relations:
      - from: "68"
        to: "81"
        label: "Makes API calls to"
        description: "JSON/HTTPS"
      - from: "71"
        to: "81"
        label: "Makes API calls to"
        description: "JSON/HTTPS"
      - from: "77"
        to: "71"
        label: "Delivers to the customer's web browser"
      - from: "81"
        to: "74"
        label: "Makes API calls to"
        description: "XML/HTTPS"
      - from: "81"
        to: "87"
        label: "Reads from and writes to"
        description: "JDBC"
      - from: "81"
        to: "91"
        label: "Reads from and writes to"
        description: "JDBC"

